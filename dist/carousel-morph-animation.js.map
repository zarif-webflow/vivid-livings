{
  "version": 3,
  "sources": ["../src/features/carousel-morph-animation.ts", "../src/types/embla.ts"],
  "sourcesContent": ["import { getGsap, getHtmlElement, getMultipleHtmlElements } from \"@taj-wf/utils\";\r\nimport type { EmblaCarouselType } from \"embla-carousel\";\r\n\r\nimport { type EmblaNodeElement } from \"@/types/embla\";\r\n\r\ntype ChildAnimationElements = {\r\n  details: HTMLElement | undefined | null;\r\n  price: HTMLElement | undefined | null;\r\n};\r\ntype ChildAnimationElementsMap = Map<number, ChildAnimationElements>;\r\n\r\nconst init = () => {\r\n  const [gsap] = getGsap(undefined, \"error\");\r\n\r\n  if (!gsap) return;\r\n\r\n  const featuredListingCarouslNodes = getMultipleHtmlElements<EmblaNodeElement>({\r\n    selector: \"[data-carousel-parent][data-featured-listing]\",\r\n  });\r\n\r\n  if (!featuredListingCarouslNodes) return;\r\n\r\n  for (const carouselNode of featuredListingCarouslNodes) {\r\n    let isInitialized = false;\r\n    let carouselApi = carouselNode.emblaApi;\r\n    let slideCards = getMultipleHtmlElements({\r\n      selector: \"[data-carousel-card]\",\r\n      parent: carouselNode,\r\n    });\r\n    let currentIndex = carouselApi?.selectedScrollSnap();\r\n\r\n    const childAnimationElementsMap: ChildAnimationElementsMap = new Map();\r\n\r\n    const selectCurrentSlide = (currIndex: number) => {\r\n      if (!slideCards) {\r\n        console.debug(\"selectCurrentSlide was used before carousel was initialized\");\r\n        return;\r\n      }\r\n\r\n      const childElementsAnimationRevealState: gsap.TweenVars = {\r\n        yPercent: 0,\r\n        opacity: 1,\r\n        stagger: 0.25,\r\n        delay: 0.15,\r\n        overwrite: true,\r\n      };\r\n\r\n      const childElementsAnimationHiddenState: gsap.TweenVars = {\r\n        yPercent: -105,\r\n        opacity: 0.5,\r\n        overwrite: true,\r\n      };\r\n\r\n      for (let i = 0; i < slideCards.length; i++) {\r\n        const slideCard = slideCards[i]!;\r\n        const isCurrentSlide = i === currIndex;\r\n\r\n        const childAnimationElements = childAnimationElementsMap.get(i);\r\n        const childAnimationElementsArr = [\r\n          childAnimationElements?.details,\r\n          childAnimationElements?.price,\r\n        ].filter((el) => el !== undefined && el !== null);\r\n\r\n        if (isCurrentSlide) {\r\n          gsap.to(slideCard, { scale: 1, x: 0, ease: \"back\", duration: 0.7 });\r\n          gsap.to(childAnimationElementsArr, childElementsAnimationRevealState);\r\n        } else {\r\n          const isLeftSide = i < currIndex;\r\n\r\n          const positionIndex = isLeftSide ? currIndex - i - 1 : i - currIndex - 1;\r\n\r\n          const transformAlign = isLeftSide ? \"right\" : \"left\";\r\n          slideCard.style.transformOrigin = `${transformAlign} top`;\r\n\r\n          gsap.to(slideCard, {\r\n            x: () => {\r\n              const gapAdjustment = Number.parseFloat(\r\n                getComputedStyle(document.documentElement).getPropertyValue(\r\n                  \"--_responsive---featured-listing-carousel--animation-gap-adjustment-percent\"\r\n                )\r\n              );\r\n\r\n              return isLeftSide\r\n                ? `${gapAdjustment * positionIndex}%`\r\n                : `-${gapAdjustment * positionIndex}%`;\r\n            },\r\n            scale: () => {\r\n              const scale = getComputedStyle(document.documentElement).getPropertyValue(\r\n                \"--_responsive---featured-listing-carousel--inactive-slide-scale-ratio\"\r\n              );\r\n              return scale;\r\n            },\r\n            ease: \"back\",\r\n            duration: 0.7,\r\n          });\r\n          gsap.to(childAnimationElementsArr, childElementsAnimationHiddenState);\r\n        }\r\n      }\r\n    };\r\n\r\n    const initializeSliderCards = (carouselApi: EmblaCarouselType, slideCards: HTMLElement[]) => {\r\n      if (isInitialized) return;\r\n      currentIndex = carouselApi.selectedScrollSnap();\r\n\r\n      for (let i = 0; i < slideCards.length; i++) {\r\n        const slideCard = slideCards[i]!;\r\n        const details = getHtmlElement({ selector: \"[data-featured-details]\", parent: slideCard });\r\n        const price = getHtmlElement({ selector: \"[data-featured-price]\", parent: slideCard });\r\n\r\n        const childAnimationElements: ChildAnimationElements = { details, price };\r\n\r\n        childAnimationElementsMap.set(i, childAnimationElements);\r\n      }\r\n\r\n      selectCurrentSlide(currentIndex);\r\n      isInitialized = true;\r\n    };\r\n\r\n    if (carouselApi && slideCards) {\r\n      initializeSliderCards(carouselApi, slideCards);\r\n    }\r\n\r\n    carouselNode.addEventListener(\"embla:init\", (event) => {\r\n      carouselApi = event.detail.embla;\r\n      slideCards = getMultipleHtmlElements({\r\n        selector: \"[data-carousel-card]\",\r\n        parent: carouselNode,\r\n      });\r\n\r\n      if (!slideCards) {\r\n        console.error(\"Carousel cards not found during embla:init\");\r\n        return;\r\n      }\r\n\r\n      initializeSliderCards(carouselApi, slideCards);\r\n    });\r\n\r\n    carouselNode.addEventListener(\"embla:select\", (event) => {\r\n      carouselApi = event.detail.embla;\r\n\r\n      currentIndex = carouselApi.selectedScrollSnap();\r\n\r\n      selectCurrentSlide(currentIndex);\r\n    });\r\n\r\n    carouselNode.addEventListener(\"embla:reInit\", (event) => {\r\n      carouselApi = event.detail.embla;\r\n\r\n      currentIndex = carouselApi.selectedScrollSnap();\r\n\r\n      selectCurrentSlide(currentIndex);\r\n    });\r\n  }\r\n};\r\n\r\ninit();\r\n", "import type { EmblaCarouselType, EmblaEventType } from \"embla-carousel\";\n\n// Event type for Embla custom events\ninterface EmblaCustomEvent extends CustomEvent {\n  detail: {\n    embla: EmblaCarouselType;\n  };\n}\n\n// Type for embla node event map\ntype EmblaNodeEventMap = {\n  [K in EmblaEventType as `embla:${K}`]: EmblaCustomEvent;\n};\n\n// Extended element type for embla nodes\nexport interface EmblaNodeElement extends HTMLElement {\n  // Store the Embla API instance directly on the element\n  emblaApi?: EmblaCarouselType;\n\n  // Include all embla custom events\n  addEventListener<K extends keyof EmblaNodeEventMap>(\n    type: K,\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    listener: (this: EmblaNodeElement, ev: EmblaNodeEventMap[K]) => any,\n    options?: boolean | AddEventListenerOptions\n  ): void;\n\n  removeEventListener<K extends keyof EmblaNodeEventMap>(\n    type: K,\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    listener: (this: EmblaNodeElement, ev: EmblaNodeEventMap[K]) => any,\n    options?: boolean | EventListenerOptions\n  ): void;\n\n  // Add dataset properties specific to embla nodes\n  dataset: {\n    carouselParent: string;\n    dragFree?: string;\n    loop?: string;\n    autoPlay?: string;\n    emblaAlign?: \"start\" | \"center\" | \"end\";\n    emblaStartIndex?: string;\n    emblaExposedEvents?: string;\n    [key: string]: string | undefined;\n  };\n}\n"],
  "mappings": "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",
  "names": ["carouselApi", "slideCards"]
}
