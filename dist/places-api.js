import{a as m}from"./chunks/chunk-UOBIIBPT.js";import{a as g}from"./chunks/chunk-EHF5TEVY.js";import{c as p,e as u}from"./chunks/chunk-ISN7ZXVF.js";var h=u(import.meta.url);if(!h)throw new Error("Search Address script element was not found!");var f=h.getAttribute("data-places-key");if(!f)throw new Error("Places API key was not found in the script element! Please set data-places-key attribute in the script.");var y=new m({apiKey:f,version:"weekly"}),E=o=>o.replaceAll(" - ",", ").replaceAll(" | ",", "),x=async()=>{let{AutocompleteSuggestion:o}=await y.importLibrary("places"),e=new Map;return{fetchAddresses:g(async(n,r)=>{let l=e.get(n);if(l!==void 0){r(l);return}try{let c={input:n,includedRegionCodes:["ae"],includedPrimaryTypes:["lodging","sublocality","apartment_complex","neighborhood","condominium_complex"]},s=await o.fetchAutocompleteSuggestions(c);console.clear(),s.suggestions.forEach(t=>{let d=t?.placePrediction.mainText?.text;if(!d)throw new Error("No main text found for suggestion");let w=E(d);console.log("-------"),console.log(w),console.log(t?.placePrediction?.types),console.log("--------------")});let a=s.suggestions.filter(t=>t.placePrediction!=null).map(t=>t.placePrediction.text.text);e.set(n,a),r(a)}catch(c){console.error("Something went wrong with places api:",c);let s=[];e.set(n,s),r(s)}},100)}},L=x(),P=async()=>{L.then(({fetchAddresses:o})=>{console.log("Autocompletetions Loaded Succesfully!");let e=p({selector:"[data-search-input]"});e&&e.addEventListener("input",()=>{let i=e.value;o(i,A=>{})})})};P();export{L as fetchAddresses};
