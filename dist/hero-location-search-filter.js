import{c as b}from"./chunks/chunk-A5GB23EF.js";function g(i,f,{signal:s,edges:o}={}){let n,e=null,a=o!=null&&o.includes("leading"),u=o==null||o.includes("trailing"),x=()=>{e!==null&&(i.apply(n,e),n=void 0,e=null)},d=()=>{u&&x(),p()},m=null,t=()=>{m!=null&&clearTimeout(m),m=setTimeout(()=>{m=null,d()},f)},r=()=>{m!==null&&(clearTimeout(m),m=null)},p=()=>{r(),n=void 0,e=null},c=()=>{r(),x()},l=function(...y){if(s?.aborted)return;n=this,e=y;let h=m==null;t(),a&&h&&x()};return l.schedule=t,l.cancel=p,l.flush=c,s?.addEventListener("abort",p,{once:!0}),l}var B=i=>i.filters.value.groups?.[0]?.conditions??[],w=i=>i.map(f=>f.fields);function C(i,f){let s=f?f.endsWith("_")?f:`${f}_`:"",o=i.filter(({interacted:n,value:e})=>n===!0&&e!=null&&String(e).trim()!=="").map(({id:n,value:e})=>{let a=`${s}${n}`;return`${encodeURIComponent(a)}=${encodeURIComponent(String(e))}`});return o.length>0?`?${o.join("&")}`:""}var R=(i,f)=>{let s={locationSearchInput:`[fs-list-instance=${i}] input[fs-list-field=name-with-location][data-input-combobox=input]`,searchButton:`[fs-list-instance=${i}] form button[data-search-button=true]`},o=b({selector:s.locationSearchInput});if(!o){console.error("Location search input not found",s.locationSearchInput);return}let n=b({selector:s.searchButton});if(!n){console.error("Search button not found",s.searchButton);return}let e=o.getAttribute("data-search-params-prefix");e||(console.debug("Search params prefix not found, using default value"),e="");let a=o.comboboxApi,u=[],x=[],d;o.addEventListener("combobox-init",t=>{a=t.detail.api}),window.FinsweetAttributes||(window.FinsweetAttributes=[]),window.FinsweetAttributes.push(["list",t=>{for(let r of t)r.instance===i&&(d=r,r.addHook("filter",p=>{let c=w(p),l=[];for(let h of c){let S=h["name-with-location"]?.value;typeof S=="string"&&l.push(S)}return u=l,x=B(r),p}))}]);let m=g((t,r)=>{if(!t.trim()){r.renderResults([]),r.closeResultModal();return}r.renderResults(u),r.openResultModal()},200);o.addEventListener("input",()=>{if(!a){console.error("Combobox API not found",o);return}let t=o.value;m(t,a)}),n.addEventListener("click",()=>{let t=C(x,e),p=`${window.location.origin}/${f}${t}`;window.location.href=p}),o.addEventListener("combobox-select",t=>{let r=t.detail.selectedValue,p=d?.filters.value.groups[0]?.conditions;if(p)for(let c of p)c.fieldKey==="name-with-location"&&(c.value=r)})},E=()=>{R("property-location-search","buy"),R("offplan-location-search","off-plan")};E();
