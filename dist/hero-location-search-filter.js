import{a as x}from"./chunks/chunk-EHF5TEVY.js";import{c as b}from"./chunks/chunk-ISN7ZXVF.js";var w=i=>i.filters.value.groups?.[0]?.conditions??[],F=i=>i.map(s=>s.fields);function v(i,s){let l=s?s.endsWith("_")?s:`${s}_`:"",u=i.filter(({interacted:t,value:r})=>t===!0&&r!=null&&String(r).trim()!=="").map(({id:t,value:r})=>{let f=`${l}${t}`;return`${encodeURIComponent(f)}=${encodeURIComponent(String(r))}`});return u.length>0?`?${u.join("&")}`:""}var o={buy:"property-buy-search",rent:"property-rent-search",offplan:"offplan-search"},c={buy:"location-text",rent:"location-text",offplan:"name-with-location"},m={buy:{pageSlug:"buy",fsListInstanceName:o.buy,selectors:{locationSearchInput:`[fs-list-instance=${o.buy}] input[fs-list-field=${c.buy}][data-input-combobox=input]`,searchButton:`[fs-list-instance=${o.buy}] form button[data-search-button=true]`},fieldName:c.buy},rent:{pageSlug:"rent",fsListInstanceName:o.rent,selectors:{locationSearchInput:`[fs-list-instance=${o.rent}] input[fs-list-field=${c.rent}][data-input-combobox=input]`,searchButton:`[fs-list-instance=${o.rent}] form button[data-search-button=true]`},fieldName:c.rent},offplan:{pageSlug:"off-plan",fsListInstanceName:o.offplan,selectors:{locationSearchInput:`[fs-list-instance=${o.offplan}] input[fs-list-field=${c.offplan}][data-input-combobox=input]`,searchButton:`[fs-list-instance=${o.offplan}] form button[data-search-button=true]`},fieldName:c.offplan}},g=({fsListInstanceName:i,pageSlug:s,selectors:l,fieldName:u})=>{let t=b({selector:l.locationSearchInput});if(!t){console.error("Location search input not found",l.locationSearchInput);return}let r=b({selector:l.searchButton});if(!r){console.error("Search button not found",l.searchButton);return}let f=t.getAttribute("data-search-params-prefix");f||(console.debug("Search params prefix not found, using default value"),f="");let p=t.comboboxApi,h=[],y=[],I;t.addEventListener("combobox-init",n=>{p=n.detail.api}),window.FinsweetAttributes||(window.FinsweetAttributes=[]),window.FinsweetAttributes.push(["list",n=>{for(let e of n)e.instance===i&&(I=e,e.addHook("filter",a=>{let d=F(a),L=new Set;for(let A of d){let $=A[u]?.value;typeof $=="string"&&L.add($)}return h=Array.from(L),y=w(e),a}))}]);let S=x((n,e)=>{if(!n.trim()){e.renderResults([]),e.closeResultModal();return}e.renderResults(h),e.openResultModal()},200);t.addEventListener("input",()=>{if(!p){console.error("Combobox API not found",t);return}let n=t.value;S(n,p)}),r.addEventListener("click",()=>{let n=v(y,f),a=`${window.location.origin}/${s}${n}`;window.location.href=a}),t.addEventListener("combobox-select",n=>{let e=n.detail.selectedValue,a=I?.filters.value.groups[0]?.conditions;if(a)for(let d of a)d.fieldKey===u&&(d.value=e)})},C=()=>{g(m.buy),g(m.rent),g(m.offplan)};C();
