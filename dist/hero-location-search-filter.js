import{a as L}from"./chunks/chunk-EHF5TEVY.js";import{a as w,b as x,c as $}from"./chunks/chunk-IEHLLWHB.js";import{c as u}from"./chunks/chunk-ISN7ZXVF.js";var n={buy:"property-buy-search",rent:"property-rent-search",offplan:"offplan-search"},i={buy:"location-text",rent:"location-text",offplan:"name-with-location"},f={buy:{pageSlug:"buy",fsListInstanceName:n.buy,selectors:{locationSearchInput:`[fs-list-instance=${n.buy}] input[fs-list-field=${i.buy}][data-input-combobox=input]`,searchButton:`[fs-list-instance=${n.buy}] form button[data-search-button=true]`},fieldName:i.buy},rent:{pageSlug:"rent",fsListInstanceName:n.rent,selectors:{locationSearchInput:`[fs-list-instance=${n.rent}] input[fs-list-field=${i.rent}][data-input-combobox=input]`,searchButton:`[fs-list-instance=${n.rent}] form button[data-search-button=true]`},fieldName:i.rent},offplan:{pageSlug:"off-plan",fsListInstanceName:n.offplan,selectors:{locationSearchInput:`[fs-list-instance=${n.offplan}] input[fs-list-field=${i.offplan}][data-input-combobox=input]`,searchButton:`[fs-list-instance=${n.offplan}] form button[data-search-button=true]`},fieldName:i.offplan}},d=({fsListInstanceName:F,pageSlug:v,selectors:a,fieldName:p})=>{let o=u({selector:a.locationSearchInput});if(!o){console.error("Location search input not found",a.locationSearchInput);return}let b=u({selector:a.searchButton});if(!b){console.error("Search button not found",a.searchButton);return}let l=o.getAttribute("data-search-params-prefix");l||(console.debug("Search params prefix not found, using default value"),l="");let c=o.comboboxApi,m=[],h=[],g;o.addEventListener("combobox-init",e=>{c=e.detail.api}),window.FinsweetAttributes||(window.FinsweetAttributes=[]),window.FinsweetAttributes.push(["list",e=>{for(let t of e)t.instance===F&&(g=t,t.addHook("filter",s=>{let r=x(s),y=new Set;for(let A of r){let I=A[p]?.value;typeof I=="string"&&y.add(I)}return m=Array.from(y),h=w(t),s}))}]);let S=L((e,t)=>{if(!e.trim()){t.renderResults([]),t.closeResultModal();return}t.renderResults(m),t.openResultModal()},200);o.addEventListener("input",()=>{if(!c){console.error("Combobox API not found",o);return}let e=o.value;S(e,c)}),b.addEventListener("click",()=>{let e=$(h,l),s=`${window.location.origin}/${v}${e}`;window.location.href=s}),o.addEventListener("combobox-select",e=>{let t=e.detail.selectedValue,s=g?.filters.value.groups[0]?.conditions;if(s)for(let r of s)r.fieldKey===p&&(r.value=t)})},B=()=>{d(f.buy),d(f.rent),d(f.offplan)};B();
