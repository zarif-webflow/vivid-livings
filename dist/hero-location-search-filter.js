import{c as g}from"./chunks/chunk-A5GB23EF.js";function B(p,i,{signal:s,edges:f}={}){let o,r=null,x=f!=null&&f.includes("leading"),d=f==null||f.includes("trailing"),c=()=>{r!==null&&(p.apply(o,r),o=void 0,r=null)},h=()=>{d&&c(),e()},n=null,b=()=>{n!=null&&clearTimeout(n),n=setTimeout(()=>{n=null,h()},i)},t=()=>{n!==null&&(clearTimeout(n),n=null)},e=()=>{t(),o=void 0,r=null},m=()=>{t(),c()},a=function(...y){if(s?.aborted)return;o=this,r=y;let I=n==null;b(),x&&I&&c()};return a.schedule=b,a.cancel=e,a.flush=m,s?.addEventListener("abort",e,{once:!0}),a}var F=p=>p.filters.value.groups?.[0]?.conditions??[],C=p=>p.map(i=>i.fields);function k(p,i){let s=i?i.endsWith("_")?i:`${i}_`:"",f=p.filter(({interacted:o,value:r})=>o===!0&&r!=null&&String(r).trim()!=="").map(({id:o,value:r})=>{let x=`${s}${o}`;return`${encodeURIComponent(x)}=${encodeURIComponent(String(r))}`});return f.length>0?`?${f.join("&")}`:""}var l={buy:"property-buy-search",rent:"property-rent-search",offplan:"offplan-search"},u={buy:"location-text",rent:"location-text",offplan:"name-with-location"},S={buy:{pageSlug:"buy",fsListInstanceName:l.buy,selectors:{locationSearchInput:`[fs-list-instance=${l.buy}] input[fs-list-field=${u.buy}][data-input-combobox=input]`,searchButton:`[fs-list-instance=${l.buy}] form button[data-search-button=true]`},fieldName:u.buy},rent:{pageSlug:"rent",fsListInstanceName:l.rent,selectors:{locationSearchInput:`[fs-list-instance=${l.rent}] input[fs-list-field=${u.rent}][data-input-combobox=input]`,searchButton:`[fs-list-instance=${l.rent}] form button[data-search-button=true]`},fieldName:u.rent},offplan:{pageSlug:"off-plan",fsListInstanceName:l.offplan,selectors:{locationSearchInput:`[fs-list-instance=${l.offplan}] input[fs-list-field=${u.offplan}][data-input-combobox=input]`,searchButton:`[fs-list-instance=${l.offplan}] form button[data-search-button=true]`},fieldName:u.offplan}},w=({fsListInstanceName:p,pageSlug:i,selectors:s,fieldName:f})=>{let o=g({selector:s.locationSearchInput});if(!o){console.error("Location search input not found",s.locationSearchInput);return}let r=g({selector:s.searchButton});if(!r){console.error("Search button not found",s.searchButton);return}let x=o.getAttribute("data-search-params-prefix");x||(console.debug("Search params prefix not found, using default value"),x="");let d=o.comboboxApi,c=[],h=[],n;o.addEventListener("combobox-init",t=>{d=t.detail.api}),window.FinsweetAttributes||(window.FinsweetAttributes=[]),window.FinsweetAttributes.push(["list",t=>{for(let e of t)e.instance===p&&(n=e,e.addHook("filter",m=>{let a=C(m),y=new Set;for(let v of a){let L=v[f]?.value;typeof L=="string"&&y.add(L)}return c=Array.from(y),h=F(e),m}))}]);let b=B((t,e)=>{if(!t.trim()){e.renderResults([]),e.closeResultModal();return}e.renderResults(c),e.openResultModal()},200);o.addEventListener("input",()=>{if(!d){console.error("Combobox API not found",o);return}let t=o.value;b(t,d)}),r.addEventListener("click",()=>{let t=k(h,x),m=`${window.location.origin}/${i}${t}`;window.location.href=m}),o.addEventListener("combobox-select",t=>{let e=t.detail.selectedValue,m=n?.filters.value.groups[0]?.conditions;if(m)for(let a of m)a.fieldKey===f&&(a.value=e)})},W=()=>{w(S.buy),w(S.rent),w(S.offplan)};W();
